//
//  DriverResource.cpp
//  RD
//
//  Created by Jacques Tronconi on 22/07/2018.
//

#include "DriverResource.h"

namespace RD
{
    /////////////////////////////////////////////////////////////////////////////////
    DriverResource::DriverResource(Driver* driver) : creator(driver), uses(0)
    {
        
    }
    
    /////////////////////////////////////////////////////////////////////////////////
    DriverResource::~DriverResource()
    {
        
    }
    
    /////////////////////////////////////////////////////////////////////////////////
    const Driver* DriverResource::driver() const
    {
        return creator;
    }
    
    /////////////////////////////////////////////////////////////////////////////////
    void DriverResource::lock() const
    {
        uses++;
    }
    
    /////////////////////////////////////////////////////////////////////////////////
    void DriverResource::unlock() const
    {
        uses--;
    }
    
    /////////////////////////////////////////////////////////////////////////////////
    std::size_t DriverResource::usesCount() const
    {
        return uses.load();
    }
    
    /////////////////////////////////////////////////////////////////////////////////
    bool DriverResource::isUsed() const
    {
        return usesCount() > 0;
    }
}
